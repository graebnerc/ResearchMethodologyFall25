{
  "hash": "6539e7265a2dad8ab1313023b1b6c289",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Implementation Lab: Linear Regression & Experimental Analysis\"\nsubtitle: \"Student Worksheet\"\nformat:\n  html:\n    toc: true\n    code-fold: show\n    theme: cosmo\nexecute:\n  error: true\n---\n\n# Setup\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load required packages\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(broom)\nlibrary(effectsize)\nlibrary(car)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load the datasets\nmarketing_data <- read.csv(\"marketing_data.csv\")\nfirm_growth_data <- read.csv(\"firm_growth_data.csv\")\nleadership_study_between <- read.csv(\"leadership_study_between.csv\")\ncommunication_study <- read.csv(\"communication_study.csv\")\n```\n:::\n\n\n---\n\n# Part 1: Linear Regression\n\n## 1.1 Simple vs. Multiple Regression\n\n**Research Question:** How does ad spending affect sales revenue?\n\n### Simple Regression\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Fit simple regression: sales_revenue ~ ad_spend; use marketing_data\nmodel_simple <- lm(___ ~ ___, data = ___)\nsummary(model_simple)\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in parse(text = input): <text>:2:21: unexpected input\n1: # Fit simple regression: sales_revenue ~ ad_spend; use marketing_data\n2: model_simple <- lm(__\n                       ^\n```\n\n\n:::\n:::\n\n\n**Coefficient interpretation:**\n\nFor every EUR 1 increase in ad spending, there is an associated sales revenue increases by approximately _______ EUR on average.\n\n### Multiple Regression\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Add website_traffic to the model\nmodel_multiple <- lm(___ ~ ___ + ___, data = marketing_data)\nsummary(model_multiple)\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in parse(text = input): <text>:2:23: unexpected input\n1: # Add website_traffic to the model\n2: model_multiple <- lm(__\n                         ^\n```\n\n\n:::\n:::\n\n\n### Compare Coefficients\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Extract coefficient for ad_spend from both models\ncoef_simple <- coef(model_simple)[\"ad_spend\"]\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError: object 'model_simple' not found\n```\n\n\n:::\n\n```{.r .cell-code}\ncoef_multiple <- coef(model_multiple)[\"ad_spend\"]\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError: object 'model_multiple' not found\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Simple model:\", round(coef_simple, 3), \"\\n\")\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError: object 'coef_simple' not found\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Multiple model:\", round(coef_multiple, 3), \"\\n\")\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError: object 'coef_multiple' not found\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Difference:\", round(coef_simple - coef_multiple, 3), \"\\n\")\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError: object 'coef_simple' not found\n```\n\n\n:::\n:::\n\n\n**Notes on omitted variable bias:**\n\n_Space for your notes:_\n\n---\n\n## 1.2 Model Diagnostics\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Extract fitted values and residuals\nfitted_values <- fitted(model_multiple)\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError: object 'model_multiple' not found\n```\n\n\n:::\n\n```{.r .cell-code}\nresiduals_values <- residuals(model_multiple)\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError: object 'model_multiple' not found\n```\n\n\n:::\n\n```{.r .cell-code}\n# Create diagnostic plots\nlibrary(gridExtra)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'gridExtra'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:dplyr':\n\n    combine\n```\n\n\n:::\n\n```{.r .cell-code}\n# Residuals vs Fitted\np1 <- ggplot(data.frame(fitted = fitted_values, resid = residuals_values),\n             aes(x = fitted, y = resid)) +\n  geom_point(alpha = 0.6) +\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n  geom_smooth(se = FALSE, color = \"blue\") +\n  labs(title = \"Residuals vs Fitted\",\n       x = \"Fitted Values\", \n       y = \"Residuals\") +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError: object 'fitted_values' not found\n```\n\n\n:::\n\n```{.r .cell-code}\n# Q-Q Plot\np2 <- ggplot(data.frame(resid = residuals_values), aes(sample = resid)) +\n  stat_qq() +\n  stat_qq_line(color = \"red\") +\n  labs(title = \"Normal Q-Q Plot\",\n       x = \"Theoretical Quantiles\",\n       y = \"Sample Quantiles\") +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError: object 'residuals_values' not found\n```\n\n\n:::\n\n```{.r .cell-code}\ngrid.arrange(p1, p2, ncol = 2)\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError: object 'p1' not found\n```\n\n\n:::\n:::\n\n\n**What to look for:**\n- Residuals vs Fitted: _______________\n- Q-Q Plot: _______________\n\n---\n\n## 1.3 Log Transformation\n\n**Research Question:** How has company revenue grown over time?\n\n### Visualize Raw Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create scatter plot with linear fit\nggplot(firm_growth_data, aes(x = year, y = revenue)) +\n  geom_point(size = 3) +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"red\") +\n  labs(title = \"Revenue Growth Over Time\",\n       x = \"Year\",\n       y = \"Revenue (EUR)\") +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](student_template_files/figure-html/visualize-exponential-1.png){width=672}\n:::\n:::\n\n\n**Observation:**\n\n_Does the linear fit look appropriate?_\n\n### Apply Log Transformation\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create log-transformed variable\nfirm_growth_data <- firm_growth_data %>%\n  mutate(log_revenue = ____(revenue))\n\n# Fit models\nmodel_linear <- lm(revenue ~ year, data = firm_growth_data)\nmodel_log <- lm(log_revenue ~ year, data = firm_growth_data)\n\n# Compare R²\nsummary(model_linear)$r.squared\nsummary(model_log)$r.squared\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in parse(text = input): <text>:3:25: unexpected input\n2: firm_growth_data <- firm_growth_data %>%\n3:   mutate(log_revenue = __\n                           ^\n```\n\n\n:::\n:::\n\n\n### Visualize Log-Transformed Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Plot log(revenue) vs year\nggplot(firm_growth_data, aes(x = year, y = log_revenue)) +\n  geom_point(size = 3) +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"blue\") +\n  labs(title = \"Log(Revenue) vs Year\",\n       x = \"Year\",\n       y = \"Log(Revenue)\") +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in `geom_point()`:\n! Problem while computing aesthetics.\nℹ Error occurred in the 1st layer.\nCaused by error:\n! object 'log_revenue' not found\n```\n\n\n:::\n:::\n\n\n### Interpret Coefficients\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Get coefficient\ncoef_log <- coef(model_log)[\"year\"]\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError: object 'model_log' not found\n```\n\n\n:::\n\n```{.r .cell-code}\npercentage_change <- (exp(coef_log) - 1) * 100\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError: object 'coef_log' not found\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Annual growth rate:\", round(percentage_change, 2), \"%\\n\")\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError: object 'percentage_change' not found\n```\n\n\n:::\n:::\n\n\n**Interpretation:**\n\nWhen the dependent variable is log-transformed, coefficients represent _____________.\n\n---\n\n# Part 2: Experimental Analysis\n\n## 2.1 t-Test\n\n**Research Question:** Does leadership training improve team performance?\n\n### Visualize the Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(leadership_study_between, aes(x = group, y = team_performance, fill = group)) +\n  geom_boxplot(alpha = 0.7) +\n  geom_jitter(width = 0.2, alpha = 0.5) +\n  stat_summary(fun = mean, geom = \"point\", shape = 23, size = 3, fill = \"red\") +\n  labs(title = \"Team Performance by Group\",\n       x = \"Group\",\n       y = \"Team Performance Score\") +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](student_template_files/figure-html/visualize-ttest-1.png){width=672}\n:::\n:::\n\n\n### Check Assumptions\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Normality test for each group: the Shapiro test\n____(filter(leadership_study_between, group == \"control\")$team_performance)\n____(filter(leadership_study_between, group == \"training\")$team_performance)\n\n# Equal variances test: Levene test\n____(team_performance ~ group, data = leadership_study_between)\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in parse(text = input): <text>:2:2: unexpected input\n1: # Normality test for each group: the Shapiro test\n2: __\n    ^\n```\n\n\n:::\n:::\n\n\n**Interpretation:**\n- p-values > 0.05? If yes, assumptions are met: _______\n\n### Run t-test\n\n\n::: {.cell}\n\n```{.r .cell-code}\nt_result <- t.test(\n  team_performance ~ group,\n  data = leadership_study_between,\n  var.equal = TRUE\n)\n\nprint(t_result)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tTwo Sample t-test\n\ndata:  team_performance by group\nt = -3.7092, df = 58, p-value = 0.0004673\nalternative hypothesis: true difference in means between group control and group training is not equal to 0\n95 percent confidence interval:\n -12.154597  -3.634084\nsample estimates:\n mean in group control mean in group training \n              75.92457               83.81891 \n```\n\n\n:::\n:::\n\n\n**Results:**\n- Mean difference: _______\n- p-value: _______\n- Conclusion: _______\n\n### Calculate Effect Size\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncohens_d_result <- ____(team_performance ~ group, \n                            data = leadership_study_between)\nprint(cohens_d_result)\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in parse(text = input): <text>:1:21: unexpected input\n1: cohens_d_result <- __\n                        ^\n```\n\n\n:::\n:::\n\n\n**Effect size interpretation:**\n- Cohen's d = _______ \n- This is a _______ effect (small/medium/large)\n\n---\n\n## 2.2 One-Way ANOVA\n\n**Research Question:** Which communication method leads to highest satisfaction?\n\n### Visualize the Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(communication_study, aes(x = communication_method, \n                                 y = satisfaction_score, \n                                 fill = communication_method)) +\n  geom_boxplot(alpha = 0.7) +\n  geom_jitter(width = 0.2, alpha = 0.3) +\n  stat_summary(fun = mean, geom = \"point\", shape = 23, size = 4, fill = \"red\") +\n  labs(title = \"Satisfaction Score by Communication Method\",\n       x = \"Communication Method\",\n       y = \"Satisfaction Score\") +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](student_template_files/figure-html/visualize-anova-1.png){width=672}\n:::\n:::\n\n\n### Fit ANOVA\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Using aov()\nanova_model <- ____(satisfaction_score ~ communication_method, \n                   data = communication_study)\nsummary(anova_model)\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in parse(text = input): <text>:2:17: unexpected input\n1: # Using aov()\n2: anova_model <- __\n                   ^\n```\n\n\n:::\n:::\n\n\n**Results:**\n- F-statistic: _______\n- p-value: _______\n- Conclusion: _______\n\n### ANOVA as Regression\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Show that lm() gives same results\nlm_model <- lm(satisfaction_score ~ communication_method, \n               data = communication_study)\nanova(lm_model)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAnalysis of Variance Table\n\nResponse: satisfaction_score\n                     Df  Sum Sq Mean Sq F value    Pr(>F)    \ncommunication_method  2  51.462 25.7312  16.374 9.212e-07 ***\nResiduals            87 136.716  1.5714                      \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Look at coefficients\nsummary(lm_model)$coefficients\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                 Estimate Std. Error   t value     Pr(>|t|)\n(Intercept)                      5.656295  0.2288701 24.713991 4.231093e-41\ncommunication_methodface_to_face 1.641875  0.3236713  5.072663 2.195718e-06\ncommunication_methodvideo_call   1.563436  0.3236713  4.830320 5.797655e-06\n```\n\n\n:::\n:::\n\n\n**Notes:**\n- Reference group: _______\n- Coefficients show: _______\n\n### Effect Size\n\n\n::: {.cell}\n\n```{.r .cell-code}\neta_sq <- eta_squared(anova_model)\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError: object 'anova_model' not found\n```\n\n\n:::\n\n```{.r .cell-code}\nprint(eta_sq)\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError: object 'eta_sq' not found\n```\n\n\n:::\n:::\n\n\n**Interpretation:**\n\nCommunication method explains _______ % of variance in satisfaction.\n\n### Post-Hoc Tests\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Which groups differ?\ntukey_result <- TukeyHSD(anova_model)\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError: object 'anova_model' not found\n```\n\n\n:::\n\n```{.r .cell-code}\nprint(tukey_result)\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError: object 'tukey_result' not found\n```\n\n\n:::\n:::\n\n\n**Significant differences:**\n- _______\n- _______\n\n**No significant difference:**\n- _______\n\n---\n\n# Part 3: Guided Exercise\n\n## Dataset: Website A/B Test\n\n**Variables:**\n- `design`: Simple vs. Complex\n- `time_on_site`: Time spent (seconds)\n- `previous_visits`: Number of previous visits\n- `converted`: Purchase made (1 = yes, 0 = no)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexercise_data <- read.csv(\"exercise_data.csv\")\nhead(exercise_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  user_id design previous_visits time_on_site conversion_prob converted\n1       1 Simple              10    179.63774       0.5735567         1\n2       2 Simple              10    121.67466       0.4296563         1\n3       3 Simple               4    207.78119       0.5690097         1\n4       4 Simple               8     81.54658       0.3133435         1\n5       5 Simple               8    185.73159       0.5639764         1\n6       6 Simple               5    164.35112       0.4734029         0\n```\n\n\n:::\n:::\n\n\n## Task 1: Regression Analysis\n\n### a. Scatter plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create scatter plot of time_on_site vs converted\n```\n:::\n\n\n### b. Fit simple regression\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Fit: converted ~ time_on_site\n```\n:::\n\n\n### c. Interpret coefficient\n\n**Interpretation:**\n\n\n### d. Report R²\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate R²\n```\n:::\n\n\n---\n\n## Task 2: Compare Designs\n\n### a. t-test\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Compare time_on_site between designs\n```\n:::\n\n\n### b. Effect size\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate Cohen's d\n```\n:::\n\n\n### c. Conclusion\n\n**Which design keeps users longer?**\n\n\n---\n\n## Task 3: Omitted Variable Bias (Challenge)\n\n### a. Add previous_visits\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Fit: converted ~ time_on_site + previous_visits\n```\n:::\n\n\n### b. Compare coefficients\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Extract and compare coefficients for time_on_site\n```\n:::\n\n\n### c. Interpret\n\n**Is there omitted variable bias? Why or why not?**\n\n\n---\n\n# Key Takeaways\n\nWrite down 3 key things you learned today:\n\n1. \n\n2. \n\n3. \n\n---\n\n# Questions for Office Hours\n\nWrite down any questions or concepts you'd like to discuss further:\n\n",
    "supporting": [
      "student_template_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}